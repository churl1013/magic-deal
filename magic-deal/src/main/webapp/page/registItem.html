<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>아이템 판매/구매</title>
<script type="text/javascript" src="../lib/jquery/jquery.js"></script>
<link href="http://fonts.googleapis.com/earlyaccess/nanumgothic.css" rel="stylesheet" >
<link href="http://fonts.googleapis.com/earlyaccess/hanna.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="/magic-deal/semantic/semantic.min.css">
<link rel="stylesheet" href="../css/basic.css" />
<script>
function go_sec() {
	var s1 = document.all.s1;
	var s2 = document.all.s2;
	var s3 = document.all.s3;
	var s4 = document.all.s4;
	if (s1.value == "가구") {
		s2.style.display = "none";
		s3.value = "";
		s3.style.display = "";
		s4.style.display = "none";
	} else if (s1.value == "PC") {
		s2.style.display = "none";
		s3.style.display = "none";
		s4.value = "";
		s4.style.display = "";
	} else if (s1.value == ""){
		s2.style.display = "";
		s3.style.display = "none";
		s4.style.display = "none";
	}
}

	function checkNumber() {
		var objEv = event.srcElement;
		var numPattern = /([^0-9])/;
		var numPattern = objEv.value.match(numPattern);
		if (numPattern != null) {
			alert("숫자만 입력해주세요!");
			objEv.value = "";
			objEv.focus();
			return false;
		}
	}
	function cmaComma(obj) {
		var str = "" + obj.value.replace(/,/gi, '');
		var regx = new RegExp(/(-?\d+)(\d{3})/);
		var bExists = str.indexOf(".", 0);
		var strArr = str.split('.');

		while (regx.test(strArr[0])) {
			strArr[0] = strArr[0].replace(regx, "$1,$2");
		}
		if (bExists > -1) {
			obj.value = strArr[0] + "." + strArr[1];
		} else {
			obj.value = strArr[0];
		}
	}
$(function(){
	if(!window.File || !window.FileReader)
		return alert('error');
	$('#upImg1 > input').bind('change', function(){
		var imgFile = this.files[0],
			reader = new FileReader();
			reader.onload = function(e){
			$('.testImg').attr('src',e.target.result);
			$('#upImg1 > input').attr('type','hidden');
		};
		reader.readAsDataURL(imgFile);
	});

	$('#upImg1 > img').click(function(){
		$('#upImg1 > img').removeAttr('src');
	});
});

var rbinfo = $(':radio[name="rbinfo"]:checked').val();
$('input:radio[name=rbinfo]:input[value='+rbinfo+']').attr("checked", true);
</script>
<style>
#content1 {
	position: absolute;
	left: 27%;
	top: 10%;
	margin: -50px 0px 0px -50px;
	width: 1000px;
	height: 800px;
}

#content2 {
	position: absolute;
	width: 950px;
	margin: 20px 20px;
}

#content3 {
	position: absolute;
	top: 30%;
	width: 950px;
	height: 500px;
	margin: 20px 20px;
}

#content4 {
	position: absolute;
	width: 150px;
	left: 10%;
	height: 450px;
	margin: 20px 50px;
}

table tr {
	height: 50px;
}

input {
	margin: 3px 3px;
}

textarea {
	border: 1px solid #bcbcbc;
	margin: 3px 3px;
}

select {
	margin: 3px 3px;
	height: 30px;
}
.boximg {
	position: relative;
	float: left
}
.testImg {
	position: relative;
	margin-top: 10px;
	width:160px;
	height:160px;
	margin-right: 30px; 
	border: 1px solid #ddd;
}
.boximg > input {
	position: absolute;
	margin:0;
	margin-top:-150px;
 	margin-right: 20px; 
	width:160px;
	height:160px;
	border: 1px solid #ddd;
	opacity: 0;
	cursor: pointer;
}
</style>
</head>
<body>
			<form id='form1' action="#" method="post">
	<div id="content1">
		<div id="content2">
			<h2 align="center">아이템 판매 / 구매</h2>
			<hr>
			<div id="upImg1" class="boximg">
				<img class="testImg" src="http://semantic-ui.com/images/wireframe/image.png" />
				<input type='file' />
			</div>
			<div id="upImg2" class="boximg">
				<img class="testImg" src="http://semantic-ui.com/images/wireframe/image.png" />
				<input type='file' />
			</div>
			<div id="upImg3" class="boximg">
				<img class="testImg"src="http://semantic-ui.com/images/wireframe/image.png"/>
				<input type='file' />
			</div>
			<div id="upImg4" class="boximg">
				<img class="testImg" src="http://semantic-ui.com/images/wireframe/image.png" />
				<input type='file' />
			</div>
			<div id="upImg5" class="boximg">
				<img class="testImg" src="http://semantic-ui.com/images/wireframe/image.png" />
				<input type='file' />
			</div>
			
			<div id="board" style="width: 720"></div>
		</div>
		<div id="content3">
			<div id="content4">
				<table width="700" border="0">
				<tr>
						<th><h3>카테고리</h3></th>
						<td>
						<select name="s1" onchange="go_sec()">
		<option value="">상위 카테고리</option>
		<option value="가구">가구</option>
		<option value="PC">PC</option>
	</select>
	<select name="s2">
		<option value="">하위 카테고리</option>
	</select>
	<select name="s3" style="display: none">
		<option value="">하위 카테고리</option>
		<option value="소파">소파</option>
		<option value="의자">의자</option>
		<option value="책상">책상</option>
	</select>
	<select name="s4" style="display: none">
		<option value="">하위 카테고리</option>
		<option value="노트북">노트북</option>
		<option value="데스크탑">데스크탑</option>
		<option value="태블릿PC">태블릿PC</option>
	</select>
									<input type="text" name="item" id="item"
							placeholder="키워드" style="height: 30px; font-size: 15pt; text-align:center">
						</td>
					</tr>
					<tr>
						<th><h3>거래 종류</h3></th>
						<td>
						<label for="sell"><input type="radio" id="sell" name="rbinfo" value="판매" 
								checked="checked">판매</label>&nbsp 
						<label for="buy"><input type="radio" id="buy" name="rbinfo" value="구매">구매</label></td>
					</tr>
					<tr>
						<th><h3>희망 거래 가격</h3></th>
						<td><input type="text" name="price" id="price" size="18"
							placeholder="0" onchange="checkNumber()"
							onkeyup="cmaComma(this);" maxlength="10"
							style="height: 30px; text-align: right; font-size: 15pt"
							>&nbsp원</td>
					</tr>
					<tr>
						<th><h3>아이템 상태</h3></th>
						<td><label for="radio1"><input type="radio"
								name="condition" id="radio1" value="new" checked="checked">미사용</label>&nbsp
							<label for="radio2"><input type="radio" name="condition"
								id="radio2" value="clean">거의 새것</label>&nbsp <label for="radio3"><input
								type="radio" name="condition" id="radio3" value="old">사용감
								있음</label>&nbsp <label for="radio4"><input type="radio"
								name="condition" id="radio4" value="problem">하자있음</label></td>
					</tr>
					<tr>
						<th><h3>내용</h3></th>
						<td><textarea rows="6" cols="50" name="contents"
								placeholder="내용을 입력하세요" style="resize: none; font-size: 14pt"></textarea></td>
					</tr>
					<tr>
						<th><h3>희망 거래주소</h3></th>
						<td>
							<span id="getjson"></span> <input type="button" name="map"
							value="지도 표시" style="height: 30px" /> <input type="button"
							onclick="getLocation()" name="currentMap" value="현위치"
							style="height: 30px" />
							<script>

								function getLocation() {
									if (navigator.geolocation) {
										navigator.geolocation
												.getCurrentPosition(showPosition);

									} else {
										z.innerHTML = "Geolocation is not supported by this browser.";
									}
								}

								function showPosition(position) {
									var apiKey = '767B7ADF-10BA-3D86-AB7E-02816B5B92E9';
									var domain = 'http://map.vworld.kr';
									var output = 'json';
									var epsg = 'EPSG:4326';
									var x = position.coords.latitude;
									var y = position.coords.longitude;
									var url;
									var type;
									url = "http://apis.vworld.kr/coord2jibun.do?y="
											+ x
											+ "&x="
											+ y
											+ "&apiKey="
											+ apiKey
											+ "&domain="
											+ domain
											+ "&output="
											+ output
											+ "&epsg="
											+ epsg;
									console.log(url);
									send2(url);
									//    	z.innerHTML = "Latitude: " + x + 
									//     "<br>Longitude: " + y;	
								}
								//좌표를 주소로 표현
								function send2(url) {
									$.getJSON(url + "&callback=?", function(d) {
										$("#getjson").empty();
										$.each(d, function(k, v) {
											$("#getjson").append(
													"<div>" + v + "</div>");
										});
										$("#getjson").show();
									});
								}
							</script>
						</td>
					</tr>
					<tr>
						<th><h3>옵션</h3></th>
						<td><label for="chk"><input type="checkbox"
								name="option" id="chk">택배 거래 가능</label></td>
					</tr>
					<tr>
						<td colspan="2" align="center">
						
							<button class="ui button">Regist</button>

						</td>
					</tr>
				</table>
			</div>
		</div>
	</div>
</form>
</body>
</html>
